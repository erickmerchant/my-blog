---
{
  "title": "",
  "template": "pages/home"
}
---

<h2 class="Content heading">New design</h2>

<p class="Content paragraph">As I tend to do from time to time, I have recently rewritten this site in technologies that currently interest me. A quick summary is it is now written in Rust on the server side, uses web components on the client side, and all the CSS is new.</p>

<h3 class="Content sub-heading">Why Rust?</h3>

<p class="Content paragraph">I started learning <a href="https://www.rust-lang.org/">Rust</a> in 2020 as something to do. I had long wanted to learn a statically typed language, and also wanted to experiment with web assembly, so Rust ended up being at the top of my list of possible languages to learn.</p>

<p class="Content paragraph">I did not get far in 2020 with it. I read <a href="https://doc.rust-lang.org/book/">the book</a> and reread it. Certain concepts took some time to grasp. Then I made some experimental programs with it, and followed some tutorials. I made a static site, and then a dynamic one that used wasm to fetch markdown and render it.</p>

<p class="Content paragraph">Some time in 2021 I started to feel fairly comfortable doing certain things. I am still very much a novice, and suspect I will be for a while longer, but I can make simple programs in it. Rust is a lot of fun.</p>

<h3 class="Content sub-heading">Server requirements</h3>

<p class="Content paragraph">So I decided to make my personal site a dynamic website, instead of static, for the first time probably since somewhere close to ten years. I chose a web framework called <a href="https://actix.rs/">Actix</a>. I had a few hard requirements for the server.</p>

<ul class="Content list">
  <li>Local SSL</li>
  <li>HTTP/2</li>
  <li>Brotli compression</li>
</ul>

<p class="Content paragraph">Actix was able to do all these. I have been lurking on their Discord for a few months, and the community is helpful. Apart from middleware which is a little beyond my current understanding, Actix's api is really versatile and easy to learn. The best place to look has been their examples repo.</p>

<h3 class="Content sub-heading">Cargo dependencies</h3>

<p class="Content paragraph">Some of the more important Cargo dependencies that I am using, besides Actix:</p>

<dl class="Content definition-list">
  <dt class="Content definition-heading"><a href="https://github.com/sunng87/handlebars-rust">Handlebars</a></dt>
  <dd>A rust implementation of <a href="https://handlebarsjs.com/guide/">Handlebars</a>. The syntax is not my first choice, but its powerful partial system allowed me to use declarative shadow dom in the way that I describe below.</dd>

  <dt class="Content definition-heading"><a href="https://swc.rs/">SWC</a></dt>
  <dd>SWC is for transpiling JavaScript. It is basically a Rust Babel, but aims to be many things, such as a Eslint replacement as well. The project is great, but I do worry that its ambitions are a little too big. However I think Deno and Vercel are using it so maybe its ambitions are realistic.</dd>

  <dt class="Content definition-heading"><a href="https://parceljs.org/blog/parcel-css/">Parcel CSS</a></dt>
  <dd>And finally Parcel CSS is for transpiling CSS. It is basically like Postcss in Rust. It was actually released when I had most of the server written already. Originally I was using a Sass implementation in Rust, and I had forgotten how strange Sass is, so I was not really happy using it. Parcel CSS is great, allowing me to do nesting and forget about prefixes. The only downside here is its alpha, so it sometimes breaks. Committing my lock file has been a very good thing.</dd>
</dl>

<h3 class="Content sub-heading">Declarative shadow dom</h3>

<p class="Content paragraph">For many years I have used <a href="https://github.com/hyper-views/framework">@hyper-views/framework</a> and before when it was @erickmerchant/framework for all front end things. For the site redesign I decided to experiment with vanilla web components and <a href="https://web.dev/declarative-shadow-dom/">declarative shadow dom</a>.</p>
