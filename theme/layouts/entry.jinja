{% extends "layouts/base.jinja" %}

{% macro published_and_tags(entry) %}
{% if entry.date or entry.tags %}
<div class="published-and-tags">
	{% if entry.date %}
	<p class="published">
		<time>{{entry.date | format_date("%B %e, %Y")}}</time>
	</p>
	{% endif %}
	{% if entry.tags %}
	<ul class="tags">
		{% for t in entry.tags %}
		{# <li><a href="/tags/{{t}}/">{{t}}</a></li> #}
		<li>{{t}}</li>
		{% endfor %}
	</ul>
	{% endif %}
</div>
{% endif %}
{% endmacro %}

{% block main %}
<header>
	<h1>{% if entry.title %}{{entry.title}}{% else %}Untitled{% endif %}</h1>
	{{published_and_tags(entry)}}
</header>

{{entry.content}}

{% if entry.query and entry.query.results %}
<ol class="index">
	{% for e in entry.query.results %}
	<li>
		<header>
			<h2><a href="/posts/{{e.slug}}/">{% if e.title %}{{e.title}}{% else %}Untitled{% endif %}</a></h2>
			{{published_and_tags(e)}}
		</header>
		{% if e.description %}
		<p>{{e.description}}</p>
		{% endif %}
	</li>
	{% endfor %}
</ol>
{% endif %}
{% endblock %}
